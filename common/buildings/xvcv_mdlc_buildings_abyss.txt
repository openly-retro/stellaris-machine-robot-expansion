xvcv_mdlc_building_abyss_gateway = {
	base_buildtime = @b2_time
	base_cap_amount = 1
	category = government

	potential = {
		exists = owner
		owner = {
			has_ascension_perk = xvcv_mdlc_ap_abyss
			NOT = {
				any_owned_planet = {
					OR = {
						has_building = xvcv_mdlc_building_abyss_gateway
						has_building_construction = xvcv_mdlc_building_abyss_gateway
					}
				}
			}
		}
	}

	destroy_trigger = {
		exists = owner
		owner = { NOT = { has_ascension_perk = xvcv_mdlc_ap_abyss } }
	}

	resources = {
		category = planet_buildings
		cost = {
			trigger = { owner = { is_ai = no } }
			minerals = @b2_minerals
			exotic_gases = @b2_rare_cost
		}
		upkeep = {
			trigger = { owner = { is_ai = no } }
			energy = @b2_upkeep
			exotic_gases = @b2_rare_upkeep
		}
		produces = { physics_research = 40 }
	}

	planet_modifier = {
		planet_jobs_physics_research_produces_mult = 0.25 #quite a good bonus, right? #hope you build this building on your research planet :)
	}

	triggered_desc = {
		text = xvcv_mdlc_building_abyss_gateway_effect_desc
	}
	building_sets = {
		government
		urban
		research
	}
}
#abyss patrons
xvcv_mdlc_building_whisperers_sanctum = {
	base_buildtime = @b3_time
	icon = building_whisperers_sanctum
	category = government

	empire_limit = {
		base = 1
	}

	potential = {
		owner = { has_country_flag = xvcv_mdlc_abyss_patron_whisperers_rank_1 }
		oxr_mdlc_planet_has_vanilla_pop_colony_modifier = no
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		owner = { NOT = { has_country_flag = xvcv_mdlc_abyss_patron_whisperers_rank_1 } }
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_ethic = ethic_gestalt_consciousness }
		}
		job_evaluator_add = 3
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { has_ethic = ethic_gestalt_consciousness }
		}
		text = job_evaluator_effect_desc
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_ethic_gestalt_consciousness = no }
		}
		job_culture_worker_add = 3
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { has_ethic_gestalt_consciousness = no }
		}
		text = job_culture_worker_effect_desc
	}

	country_modifier = {
		envoys_add = 1
		spy_network_daily_value_mult = 0.15
	}

	triggered_desc = {
		trigger = { has_first_contact_dlc = yes }
		text = xvcv_mdlc_covenant_detection_first_contact_effect
	}

	on_built = {
		if = {
			limit = { has_first_contact_dlc = yes }
			planet.solar_system.starbase.fleet = { add_modifier = { modifier = xvcv_mdlc_covenant_detection_first_contact days = -1 } }
		}
	}
	
	on_destroy = {
		if = {
			limit = { has_first_contact_dlc = yes }
			planet.solar_system.starbase.fleet = { remove_modifier = xvcv_mdlc_covenant_detection_first_contact }
		}
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b3_minerals
			exotic_gases = @b3_rare_cost
		}
		upkeep = {
			energy = @b3_upkeep
			exotic_gases = @b3_rare_upkeep
		}
	}
	building_sets = {
		government
		urban
		research
	}
}
xvcv_mdlc_building_composer_sanctum = {
	base_buildtime = @b3_time
	icon = building_composer_sanctum
	category = government

	empire_limit = {
		base = 1
	}

	potential = {
		owner = { has_country_flag = xvcv_mdlc_abyss_patron_composer_rank_1 }
		oxr_mdlc_planet_has_vanilla_pop_colony_modifier = no
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		owner = { NOT = { has_country_flag = xvcv_mdlc_abyss_patron_composer_rank_1 } }
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_ethic = ethic_gestalt_consciousness }
		}
		job_evaluator_add = 3
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { has_ethic = ethic_gestalt_consciousness }
		}
		text = job_evaluator_effect_desc
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_ethic_gestalt_consciousness = no }
		}
		job_culture_worker_add = 3
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { has_ethic_gestalt_consciousness = no }
		}
		text = job_culture_worker_effect_desc
	}

	country_modifier = {
		planet_pops_upkeep_mult = -0.1
		planet_jobs_produces_mult = 0.05
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b3_minerals
			exotic_gases = @b3_rare_cost
		}
		upkeep = {
			energy = @b3_upkeep
			exotic_gases = @b3_rare_upkeep
		}
	}
	building_sets = {
		government
		urban
		research
	}
}
xvcv_mdlc_building_instrument_sanctum = {
	base_buildtime = @b3_time
	icon = building_instrument_sanctum
	category = government

	empire_limit = {
		base = 1
	}

	potential = {
		owner = { has_country_flag = xvcv_mdlc_abyss_patron_instrument_rank_1 }
		oxr_mdlc_planet_has_vanilla_pop_colony_modifier = no
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		owner = { NOT = { has_country_flag = xvcv_mdlc_abyss_patron_instrument_rank_1 } }
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_ethic = ethic_gestalt_consciousness }
		}
		job_evaluator_add = 3
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { has_ethic = ethic_gestalt_consciousness }
		}
		text = job_evaluator_effect_desc
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_ethic_gestalt_consciousness = no }
		}
		job_culture_worker_add = 3
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { has_ethic_gestalt_consciousness = no }
		}
		text = job_culture_worker_effect_desc
	}

	country_modifier = {
		planet_crime_no_happiness_mult = -0.05
		planet_jobs_energy_produces_mult = 0.1
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b3_minerals
			exotic_gases = @b3_rare_cost
		}
		upkeep = {
			energy = @b3_upkeep
			exotic_gases = @b3_rare_upkeep
		}
	}
	building_sets = {
		government
		urban
		research
	}
}
xvcv_mdlc_building_eater_sanctum = {
	base_buildtime = @b3_time
	icon = building_eater_sanctum
	category = government

	empire_limit = {
		base = 1
	}

	potential = {
		owner = { has_country_flag = xvcv_mdlc_abyss_patron_eater_rank_1 }
		oxr_mdlc_planet_has_vanilla_pop_colony_modifier = no
	}

	allow = {
		has_major_upgraded_capital = yes
	}

	destroy_trigger = {
		exists = owner
		owner = { NOT = { has_country_flag = xvcv_mdlc_abyss_patron_eater_rank_1 } }
	}

	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_ethic = ethic_gestalt_consciousness }
		}
		job_evaluator_add = 3
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { has_ethic = ethic_gestalt_consciousness }
		}
		text = job_evaluator_effect_desc
	}
	triggered_planet_modifier = {
		potential = {
			exists = owner
			owner = { has_ethic_gestalt_consciousness = no }
		}
		job_culture_worker_add = 3
	}
	triggered_desc = {
		trigger = {
			exists = owner
			owner = { has_ethic_gestalt_consciousness = no }
		}
		text = job_culture_worker_effect_desc
	}

	country_modifier = {
		ship_weapon_range_mult = 0.1
		ships_upkeep_mult = -0.1
	}

	resources = {
		category = planet_buildings
		cost = {
			minerals = @b3_minerals
			exotic_gases = @b3_rare_cost
		}
		upkeep = {
			energy = @b3_upkeep
			exotic_gases = @b3_rare_upkeep
		}
	}
	building_sets = {
		government
		urban
		research
	}
}
