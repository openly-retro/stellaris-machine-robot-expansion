# This file has button effects for the leader-making GUI
# Class-specific button effects are mostly in files named 
# xvcv_mdlc_button_effects_leader_making_<LEADER_CLASS>_customgui.txt
# The class-specific button effects which are NOT autogenerated 
# by our Python scripts, are placed in here that they don't get overwritten

xvcv_mdlc_leader_making_dummy_button_effect = {
    potential = { always = yes }
    allow = { always = yes }
}
xvcv_mdlc_leader_making_close_button_effect = {
    potential = { always = yes }
    allow = { always = yes }
    effect = {
        custom_tooltip = CLOSE_TITLE
        hidden_effect = {
            from = {
                xvcv_mdlc_leader_making_clear_values_effect = yes
                remove_country_flag = xvcv_mdlc_leader_making_in_progress
                oxr_mdlc_leader_making_clear_veteran_paragon_traits_selected_flags = yes
                oxr_mdlc_leader_making_set_leader_skill_level = { LEVEL = 1 }
            }
        }
    }
}
xvcv_mdlc_leader_making_reset_button_effect = {
    potential = { always = yes }
    allow = {
        custom_tooltip_fail = {
            text = xvcv_mdlc_leader_making_should_pick_any_trait_or_skill_level.fail
            OR = {
                xvcv_mdlc_leader_making_picked_any_class_trigger = yes
                xvcv_mdlc_leader_making_picked_any_skill_level_trigger = yes
            }
        }
    }
    effect = {
        custom_tooltip = tooltip_reset_xvcv_mdlc_leader_trait
        hidden_effect = {
            # Variables are re-calculated in the next effect
            xvcv_mdlc_leader_making_clear_values_effect = yes
            oxr_mdlc_leader_making_clear_veteran_paragon_traits_selected_flags = yes
            oxr_mdlc_leader_making_set_leader_skill_level = { LEVEL = 1 }
            oxr_mdlc_leader_making_find_maximum_trait_points_for_leader = { LEVEL = 1 }
            set_variable = {
                which = xvcv_mdlc_leader_making_trait_points
                value = oxr_mdlc_leader_making_max_trait_points
            }
            set_variable = {
                which = xvcv_mdlc_leader_making_trait_picks
                value = oxr_mdlc_leader_making_max_trait_picks
            }
        }
    }
}
xvcv_mdlc_leader_making_start_number_up_button_effect = {
    potential = { always = yes }
    allow = {
        custom_tooltip = xvcv_mdlc_leader_making_start_number_up_button_effect_tooltip
        custom_tooltip_fail = {
            text = xvcv_mdlc_leader_making_should_pick_any_trait.fail
            xvcv_mdlc_leader_making_picked_any_class_trigger = yes
        }
        custom_tooltip_fail = {
            text = xvcv_mdlc_leader_making_should_pick_any_skill_level.fail
            xvcv_mdlc_leader_making_picked_any_skill_level_trigger = yes
        }
        custom_tooltip_fail = {
            text = xvcv_mdlc_leader_making_start_number_up_button_effect.fail
            check_variable = { which = xvcv_mdlc_leader_making_start_number value < 10 }
        }
    }
    effect = {
        custom_tooltip = xvcv_mdlc_leader_making_start_number_up_button_effect_tooltip
        hidden_effect = {
            change_variable = {
                which = xvcv_mdlc_leader_making_start_number
                value = 1
            }
            set_variable = { 
                which = xvcv_mdlc_leader_making_trait_costs_count_energy_for_displaying
                value = xvcv_mdlc_leader_making_trait_costs_count_energy
            }
            multiply_variable = { 
                which = xvcv_mdlc_leader_making_trait_costs_count_energy_for_displaying
                value = xvcv_mdlc_leader_making_start_number
            }
            set_variable = { 
                which = xvcv_mdlc_leader_making_trait_costs_count_alloys_for_displaying
                value = xvcv_mdlc_leader_making_trait_costs_count_alloys
            }
            multiply_variable = { 
                which = xvcv_mdlc_leader_making_trait_costs_count_alloys_for_displaying
                value = xvcv_mdlc_leader_making_start_number
            }
        }
    }
}
xvcv_mdlc_leader_making_start_number_down_button_effect = {
    potential = { always = yes }
    allow = {
        custom_tooltip = xvcv_mdlc_leader_making_start_number_down_button_effect_tooltip
        custom_tooltip_fail = {
            text = xvcv_mdlc_leader_making_should_pick_any_trait.fail
            xvcv_mdlc_leader_making_picked_any_class_trigger = yes
        }
        custom_tooltip_fail = {
            text = xvcv_mdlc_leader_making_should_pick_any_skill_level.fail
            xvcv_mdlc_leader_making_picked_any_skill_level_trigger = yes
        }
        custom_tooltip_fail = {
            text = xvcv_mdlc_leader_making_start_number_down_button_effect.fail
            check_variable = {
                which = xvcv_mdlc_leader_making_start_number
                value > 1
            }
        }
    }
    effect = {
        custom_tooltip = xvcv_mdlc_leader_making_start_number_down_button_effect_tooltip
        hidden_effect = {
            change_variable = { 
                which = xvcv_mdlc_leader_making_start_number
                value = -1
            }
            set_variable = { 
                which = xvcv_mdlc_leader_making_trait_costs_count_energy_for_displaying
                value = xvcv_mdlc_leader_making_trait_costs_count_energy
            }
            multiply_variable = {
                which = xvcv_mdlc_leader_making_trait_costs_count_energy_for_displaying
                value = xvcv_mdlc_leader_making_start_number 
            }
            set_variable = { 
                which = xvcv_mdlc_leader_making_trait_costs_count_alloys_for_displaying
                value = xvcv_mdlc_leader_making_trait_costs_count_alloys
            }
            multiply_variable = { 
                which = xvcv_mdlc_leader_making_trait_costs_count_alloys_for_displaying
                value = xvcv_mdlc_leader_making_start_number
            }
        }
    }
}
# xvcv_mdlc_leader_making_start_button_effect moved to autogenerated file

oxr_mdlc_leader_making_level_up_button_effect = {
    potential = { always = yes }
    allow = {
        # can't go up to a level that no leader has yet reached
        custom_tooltip_fail = {
            text = oxr_mdlc_leader_making_change_level_up.fail_unobtained
            # i'll "stand on my head and spit wooden nickels" if this works
            oxr_mdlc_leader_making_check_maximum_allowed_leader_level = {
                LEVEL = @[ xvcv_mdlc_leader_making_skill_level + 1 ]
            }
        }
        custom_tooltip_fail = {
            text = oxr_mdlc_leader_making_change_level_up.fail.cost
            has_country_resource = {
                type = energy
                amount >= @[ xvcv_mdlc_leader_making_skill_level * 100 ]
            }
            has_country_resource = {
                type = alloys
                amount >= @[ xvcv_mdlc_leader_making_skill_level * 100 ]
            }
        }
        custom_tooltip_fail = {
            text = oxr_mdlc_leader_making_change_level.fail_max
            check_variable = {
                which = xvcv_mdlc_leader_making_skill_level
                value < 10
            }
        }
    }

    effect = {
        custom_tooltip = oxr_mdlc_leader_making_change_level_up_tooltip
         # let's see if we can do this 'elegantly' (probably not!)
        hidden_effect = {
            # Grab what skill level was currently set, before resetting it
            set_variable = {
                which = oxr_mdlc_leader_making_skill_increment_target_level_tmp
                value = xvcv_mdlc_leader_making_skill_level
            }
            change_variable = {
                which = oxr_mdlc_leader_making_skill_increment_target_level_tmp
                value = 1
            }
            # reset
            xvcv_mdlc_leader_making_clear_skill_levels_effect = yes
            # change target level to previous minus 1
            oxr_mdlc_leader_making_set_leader_skill_level = {
                LEVEL = oxr_mdlc_leader_making_skill_increment_target_level_tmp
            }
            oxr_mdlc_leader_making_increase_skill_level_costs = {
                LEVEL = oxr_mdlc_leader_making_skill_increment_target_level_tmp
            }
            oxr_mdlc_leader_making_find_maximum_trait_points_for_leader = {
                LEVEL = oxr_mdlc_leader_making_skill_increment_target_level_tmp
            }
            # Make current trait points incremented by the same amount the level went up
            # change by 1 because the button only goes up 1 
            change_variable = {
                which = xvcv_mdlc_leader_making_trait_points
                value = 1
            }
            # One extra pick per two levels
            change_variable = {
                which = xvcv_mdlc_leader_making_trait_picks
                value = 0.5
            }
            change_variable = {
                which = oxr_mdlc_leader_making_max_trait_picks
                value = 0.5
            }
            # dare to reset the var?
            # clear_variable = oxr_mdlc_leader_making_skill_increment_target_level_tmp
        }
    }
}

oxr_mdlc_leader_making_level_down_button_effect = {
    potential = { always = yes }
    allow = {
        # Check that if we lowered the level, points will not go below 0
        custom_tooltip_fail = {
            check_variable = {
                which = xvcv_mdlc_leader_making_trait_points
                value > 1
            }
            text = oxr_mdlc_leader_making_change_level.fail_points_negative
        }
         custom_tooltip_fail = {
            check_variable = {
                which = xvcv_mdlc_leader_making_trait_picks
                value > 0.5
            }
            text = oxr_mdlc_leader_making_change_level.fail_points_negative
        }

        # can't reduce below 8 if paragon trait selected
        custom_tooltip_fail = {
            if = {
                limit = {
                    check_variable = {
                        which = xvcv_mdlc_leader_making_skill_level
                        value = 8
                    }
                }
                NOT = {
                    has_country_flag = oxr_mdlc_leader_making_paragon_trait_selected
                }
            }
            text = oxr_mdlc_leader_making_set_skill_level.fail_paragon_trait
        }
        # can't reduce below 4 if veteran trait selected
        custom_tooltip_fail = {
            if = {
                limit = {
                    check_variable = {
                        which = xvcv_mdlc_leader_making_skill_level
                        value = 4
                    }
                }
                NOT = {
                    has_country_flag = oxr_mdlc_leader_making_veteran_trait_selected
                }
            }
            text = oxr_mdlc_leader_making_set_skill_level.fail_veteran_trait
        }
        # can't go below 1
        custom_tooltip_fail = {
            text = oxr_mdlc_leader_making_change_level.fail_min
            check_variable = {
                which = xvcv_mdlc_leader_making_skill_level
                value > 1
            }
        }
    }
    effect = {
        custom_tooltip = oxr_mdlc_leader_making_change_level_down_tooltip
        # let's see if we can do this 'elegantly' (probably not!)
        hidden_effect = {
            # Grab what skill level was currently set, before resetting it
            set_variable = {
                which = oxr_mdlc_leader_making_skill_decrement_target_level_tmp
                value = xvcv_mdlc_leader_making_skill_level
            }
            change_variable = {
                which = oxr_mdlc_leader_making_skill_decrement_target_level_tmp
                value = -1
            }
            # reset
            xvcv_mdlc_leader_making_clear_skill_levels_effect = yes
            # change target level to previous minus 1
            oxr_mdlc_leader_making_set_leader_skill_level = {
                LEVEL = oxr_mdlc_leader_making_skill_decrement_target_level_tmp
            }
            oxr_mdlc_leader_making_increase_skill_level_costs = {
                LEVEL = oxr_mdlc_leader_making_skill_decrement_target_level_tmp
            }
            oxr_mdlc_leader_making_find_maximum_trait_points_for_leader = {
                LEVEL = oxr_mdlc_leader_making_skill_decrement_target_level_tmp
            }
            change_variable = {
                which = xvcv_mdlc_leader_making_trait_points
                value = -1
            }
            # One extra pick per two levels
            change_variable = {
                which = xvcv_mdlc_leader_making_trait_picks
                value = -0.5
            }
            change_variable = {
                which = oxr_mdlc_leader_making_max_trait_picks
                value = -0.5
            }
            # dare to reset the var?
            # clear_variable = oxr_mdlc_leader_making_skill_decrement_target_level_tmp
        }
    }
    
}


xvcv_mdlc_set_skill_level_1_button_effect = {
    potential = { always = yes }
    allow = {
        custom_tooltip_fail = {
            text = xvcv_mdlc_leader_skill_cost.fail.1
            has_country_resource = { type = energy amount >= 100 }
            has_country_resource = { type = alloys amount >= 100 }
        }
        custom_tooltip_fail = {
            text = xvcv_mdlc_leader_making_already_set_skill_level.fail
            # NOT = { has_country_flag = xvcv_mdlc_leader_skill_level_set_1 }
            NOT = { oxr_mdlc_leader_making_check_leader_level_set_to = { LEVEL = 1 } }
        }
        custom_tooltip_fail = {
            text = oxr_mdlc_leader_making_set_skill_level.fail_paragon_trait
            NOT = { has_country_flag = oxr_mdlc_leader_making_paragon_trait_selected }
        }
        custom_tooltip_fail = {
            text = oxr_mdlc_leader_making_set_skill_level.fail_veteran_trait
            NOT = { has_country_flag = oxr_mdlc_leader_making_veteran_trait_selected }
        }
    }
    effect = {
        custom_tooltip = tooltip_xvcv_mdlc_leader_skill_level_set_1
        hidden_effect = {
            xvcv_mdlc_leader_making_clear_skill_levels_effect = yes
            oxr_mdlc_leader_making_set_leader_skill_level = { LEVEL = 1 }
            oxr_mdlc_leader_making_increase_skill_level_costs = { LEVEL = 1 }
            oxr_mdlc_leader_making_find_maximum_trait_points_for_leader = { LEVEL = 1 }
        }
    }
}
xvcv_mdlc_set_skill_level_2_button_effect = {
    potential = { always = yes }
    allow = {
        custom_tooltip_fail = {
            text = xvcv_mdlc_leader_skill_cost.fail.2
            has_country_resource = { type = energy amount >= 200 }
            has_country_resource = { type = alloys amount >= 200 }
        }
        custom_tooltip_fail = {
            text = xvcv_mdlc_leader_making_already_set_skill_level.fail
            # NOT = { has_country_flag = xvcv_mdlc_leader_skill_level_set_2 }
            NOT = { oxr_mdlc_leader_making_check_leader_level_set_to = { LEVEL = 2 } }
        }
        custom_tooltip_fail = {
            text = xvcv_mdlc_leader_skill_level.fail.2
            # has_country_flag = xvcv_mdlc_leader_making_set_skill_level_2_granted
            oxr_mdlc_leader_making_check_maximum_allowed_leader_level = { LEVEL = 2 }
        }
        custom_tooltip_fail = {
            text = oxr_mdlc_leader_making_set_skill_level.fail_paragon_trait
            NOT = { has_country_flag = oxr_mdlc_leader_making_paragon_trait_selected }
        }
        custom_tooltip_fail = {
            text = oxr_mdlc_leader_making_set_skill_level.fail_veteran_trait
            NOT = { has_country_flag = oxr_mdlc_leader_making_veteran_trait_selected }
        }
    }
    effect = {
        custom_tooltip = tooltip_xvcv_mdlc_leader_skill_level_set_2
        hidden_effect = {
            xvcv_mdlc_leader_making_clear_skill_levels_effect = yes
            oxr_mdlc_leader_making_set_leader_skill_level = { LEVEL = 2 }
            oxr_mdlc_leader_making_increase_skill_level_costs = { LEVEL = 2 }
            oxr_mdlc_leader_making_find_maximum_trait_points_for_leader = { LEVEL = 2 }
        }
    }
}
xvcv_mdlc_set_skill_level_3_button_effect = {
    potential = { always = yes }
    allow = {
        custom_tooltip_fail = {
            text = xvcv_mdlc_leader_skill_cost.fail.3
            has_country_resource = { type = energy amount >= 300 }
            has_country_resource = { type = alloys amount >= 300 }
        }
        custom_tooltip_fail = {
            text = xvcv_mdlc_leader_making_already_set_skill_level.fail
            # NOT = { has_country_flag = xvcv_mdlc_leader_skill_level_set_3 }
            NOT = { oxr_mdlc_leader_making_check_leader_level_set_to = { LEVEL = 3 } }
        }
        custom_tooltip_fail = {
            text = xvcv_mdlc_leader_skill_level.fail.3
            # has_country_flag = xvcv_mdlc_leader_making_set_skill_level_3_granted
            oxr_mdlc_leader_making_check_maximum_allowed_leader_level = { LEVEL = 3 }
        }
        custom_tooltip_fail = {
            text = oxr_mdlc_leader_making_set_skill_level.fail_paragon_trait
            NOT = { has_country_flag = oxr_mdlc_leader_making_paragon_trait_selected }
        }
        custom_tooltip_fail = {
            text = oxr_mdlc_leader_making_set_skill_level.fail_veteran_trait
            NOT = { has_country_flag = oxr_mdlc_leader_making_veteran_trait_selected }
        }
    }
    effect = {
        custom_tooltip = tooltip_xvcv_mdlc_leader_skill_level_set_3
        hidden_effect = {
            xvcv_mdlc_leader_making_clear_skill_levels_effect = yes
            oxr_mdlc_leader_making_set_leader_skill_level = { LEVEL = 3 }
            oxr_mdlc_leader_making_increase_skill_level_costs = { LEVEL = 3 }
            oxr_mdlc_leader_making_find_maximum_trait_points_for_leader = { LEVEL = 3 }
        }
    }
}
xvcv_mdlc_set_skill_level_4_button_effect = {
    potential = { always = yes }
    allow = {
        custom_tooltip_fail = {
            text = xvcv_mdlc_leader_skill_cost.fail.4
            has_country_resource = { type = energy amount >= 400 }
            has_country_resource = { type = alloys amount >= 400 }
        }
        custom_tooltip_fail = {
            text = xvcv_mdlc_leader_making_already_set_skill_level.fail
            # NOT = { has_country_flag = xvcv_mdlc_leader_skill_level_set_4 }
            NOT = { oxr_mdlc_leader_making_check_leader_level_set_to = { LEVEL = 4 } }
        }
        custom_tooltip_fail = {
            text = xvcv_mdlc_leader_skill_level.fail.4
            # has_country_flag = xvcv_mdlc_leader_making_set_skill_level_4_granted
            oxr_mdlc_leader_making_check_maximum_allowed_leader_level = { LEVEL = 4 }
        }
        custom_tooltip_fail = {
            text = oxr_mdlc_leader_making_set_skill_level.fail_paragon_trait
            NOT = { has_country_flag = oxr_mdlc_leader_making_paragon_trait_selected }
        }
        custom_tooltip_fail = {
            text = oxr_mdlc_leader_making_set_skill_level.fail_veteran_trait
            NOT = { has_country_flag = oxr_mdlc_leader_making_veteran_trait_selected }
        }
    }
    effect = {
        custom_tooltip = tooltip_xvcv_mdlc_leader_skill_level_set_4
        hidden_effect = {
            xvcv_mdlc_leader_making_clear_skill_levels_effect = yes
            oxr_mdlc_leader_making_set_leader_skill_level = { LEVEL = 4 }
            oxr_mdlc_leader_making_increase_skill_level_costs = { LEVEL = 4 }
            oxr_mdlc_leader_making_find_maximum_trait_points_for_leader = { LEVEL = 4 }
        }
    }
}
xvcv_mdlc_set_skill_level_5_button_effect = {
    potential = { always = yes }
    allow = {
        custom_tooltip_fail = {
            text = xvcv_mdlc_leader_skill_cost.fail.5
            has_country_resource = { type = energy amount >= 500 }
            has_country_resource = { type = alloys amount >= 500 }
        }
        custom_tooltip_fail = {
            text = xvcv_mdlc_leader_making_already_set_skill_level.fail
            # NOT = { has_country_flag = xvcv_mdlc_leader_skill_level_set_5 }
            NOT = { oxr_mdlc_leader_making_check_leader_level_set_to = { LEVEL = 5 } }
        }
        custom_tooltip_fail = {
            text = xvcv_mdlc_leader_skill_level.fail.5
            # has_country_flag = xvcv_mdlc_leader_making_set_skill_level_5_granted
            oxr_mdlc_leader_making_check_maximum_allowed_leader_level = { LEVEL = 5 }
        }
        custom_tooltip_fail = {
            text = oxr_mdlc_leader_making_set_skill_level.fail_paragon_trait
            NOT = { has_country_flag = oxr_mdlc_leader_making_paragon_trait_selected }
        }
    }
    effect = {
        custom_tooltip = tooltip_xvcv_mdlc_leader_skill_level_set_5
        hidden_effect = {
            xvcv_mdlc_leader_making_clear_skill_levels_effect = yes
            oxr_mdlc_leader_making_set_leader_skill_level = { LEVEL = 5 }
            oxr_mdlc_leader_making_increase_skill_level_costs = { LEVEL = 5 }
            oxr_mdlc_leader_making_find_maximum_trait_points_for_leader = { LEVEL = 5 }
        }
    }
}
xvcv_mdlc_set_skill_level_6_button_effect = {
    potential = { always = yes }
    allow = {
        custom_tooltip_fail = {
            text = xvcv_mdlc_leader_skill_cost.fail.6
            has_country_resource = { type = energy amount >= 600 }
            has_country_resource = { type = alloys amount >= 600 }
        }
        custom_tooltip_fail = {
            text = xvcv_mdlc_leader_making_already_set_skill_level.fail
            # NOT = { has_country_flag = xvcv_mdlc_leader_skill_level_set_6 }
            NOT = { oxr_mdlc_leader_making_check_leader_level_set_to = { LEVEL = 6 } }
        }
        custom_tooltip_fail = {
            text = xvcv_mdlc_leader_skill_level.fail.6
            # has_country_flag = xvcv_mdlc_leader_making_set_skill_level_6_granted
            oxr_mdlc_leader_making_check_maximum_allowed_leader_level = { LEVEL = 6 }
        }
        custom_tooltip_fail = {
            text = oxr_mdlc_leader_making_set_skill_level.fail_paragon_trait
            NOT = { has_country_flag = oxr_mdlc_leader_making_paragon_trait_selected }
        }
    }
    effect = {
        custom_tooltip = tooltip_xvcv_mdlc_leader_skill_level_set_6
        hidden_effect = {
            xvcv_mdlc_leader_making_clear_skill_levels_effect = yes
            oxr_mdlc_leader_making_set_leader_skill_level = { LEVEL = 6 }
            oxr_mdlc_leader_making_increase_skill_level_costs = { LEVEL = 6 }
            oxr_mdlc_leader_making_find_maximum_trait_points_for_leader = { LEVEL = 6 }
        }
    }
}
xvcv_mdlc_set_skill_level_7_button_effect = {
    potential = { always = yes }
    allow = {
        custom_tooltip_fail = {
            text = xvcv_mdlc_leader_skill_cost.fail.7
            has_country_resource = { type = energy amount >= 700 }
            has_country_resource = { type = alloys amount >= 700 }
        }
        custom_tooltip_fail = {
            text = xvcv_mdlc_leader_making_already_set_skill_level.fail
            # NOT = { has_country_flag = xvcv_mdlc_leader_skill_level_set_7 }
            NOT = { oxr_mdlc_leader_making_check_leader_level_set_to = { LEVEL = 7 } }
        }
        custom_tooltip_fail = {
            text = xvcv_mdlc_leader_skill_level.fail.7
            # has_country_flag = xvcv_mdlc_leader_making_set_skill_level_7_granted
            oxr_mdlc_leader_making_check_maximum_allowed_leader_level = { LEVEL = 7 }
        }
        custom_tooltip_fail = {
            text = oxr_mdlc_leader_making_set_skill_level.fail_paragon_trait
            NOT = { has_country_flag = oxr_mdlc_leader_making_paragon_trait_selected }
        }
    }
    effect = {
        custom_tooltip = tooltip_xvcv_mdlc_leader_skill_level_set_7
        hidden_effect = {
            xvcv_mdlc_leader_making_clear_skill_levels_effect = yes
            oxr_mdlc_leader_making_set_leader_skill_level = { LEVEL = 7 }
            oxr_mdlc_leader_making_increase_skill_level_costs = { LEVEL = 7 }
            oxr_mdlc_leader_making_find_maximum_trait_points_for_leader = { LEVEL = 7 }
        }
    }
}
xvcv_mdlc_set_skill_level_8_button_effect = {
    potential = { always = yes }
    allow = {
        custom_tooltip_fail = {
            text = xvcv_mdlc_leader_skill_cost.fail.8
            has_country_resource = { type = energy amount >= 800 }
            has_country_resource = { type = alloys amount >= 800 }
        }
        custom_tooltip_fail = {
            text = xvcv_mdlc_leader_making_already_set_skill_level.fail
            # NOT = { has_country_flag = xvcv_mdlc_leader_skill_level_set_8 }
            NOT = { oxr_mdlc_leader_making_check_leader_level_set_to = { LEVEL = 8 } }
        }
        custom_tooltip_fail = {
            text = xvcv_mdlc_leader_skill_level.fail.8
            # has_country_flag = xvcv_mdlc_leader_making_set_skill_level_8_granted
            oxr_mdlc_leader_making_check_maximum_allowed_leader_level = { LEVEL = 8 }
        }
    }
    effect = {
        custom_tooltip = tooltip_xvcv_mdlc_leader_skill_level_set_8
        hidden_effect = {
            xvcv_mdlc_leader_making_clear_skill_levels_effect = yes
            oxr_mdlc_leader_making_set_leader_skill_level = { LEVEL = 8 }
            oxr_mdlc_leader_making_increase_skill_level_costs = { LEVEL = 8 }
            oxr_mdlc_leader_making_find_maximum_trait_points_for_leader = { LEVEL = 8 }
        }
    }
}
xvcv_mdlc_set_skill_level_9_button_effect = {
    potential = { always = yes }
    allow = {
        custom_tooltip_fail = {
            text = xvcv_mdlc_leader_skill_cost.fail.9
            has_country_resource = { type = energy amount >= 900 }
            has_country_resource = { type = alloys amount >= 900 }
        }
        custom_tooltip_fail = {
            text = xvcv_mdlc_leader_making_already_set_skill_level.fail
            # NOT = { has_country_flag = xvcv_mdlc_leader_skill_level_set_9 }
            NOT = { oxr_mdlc_leader_making_check_leader_level_set_to = { LEVEL = 9 } }
        }
        custom_tooltip_fail = {
            text = xvcv_mdlc_leader_skill_level.fail.9
            # has_country_flag = xvcv_mdlc_leader_making_set_skill_level_9_granted
            oxr_mdlc_leader_making_check_maximum_allowed_leader_level = { LEVEL = 9 }
        }
    }
    effect = {
        custom_tooltip = tooltip_xvcv_mdlc_leader_skill_level_set_9
        hidden_effect = {
            xvcv_mdlc_leader_making_clear_skill_levels_effect = yes
            oxr_mdlc_leader_making_set_leader_skill_level = { LEVEL = 9 }
            oxr_mdlc_leader_making_increase_skill_level_costs = { LEVEL = 9 }
            oxr_mdlc_leader_making_find_maximum_trait_points_for_leader = { LEVEL = 9 }
        }
    }
}
xvcv_mdlc_set_skill_level_10_button_effect = {
    potential = { always = yes }
    allow = {
        custom_tooltip_fail = {
            text = xvcv_mdlc_leader_skill_cost.fail.10
            has_country_resource = { type = energy amount >= 1000 }
            has_country_resource = { type = alloys amount >= 1000 }
        }
        custom_tooltip_fail = {
            text = xvcv_mdlc_leader_making_already_set_skill_level.fail
            # NOT = { has_country_flag = xvcv_mdlc_leader_skill_level_set_10 }
            NOT = { oxr_mdlc_leader_making_check_leader_level_set_to = { LEVEL = 10 } }
        }
        custom_tooltip_fail = {
            text = xvcv_mdlc_leader_skill_level.fail.10
            # has_country_flag = xvcv_mdlc_leader_making_set_skill_level_10_granted
            oxr_mdlc_leader_making_check_maximum_allowed_leader_level = { LEVEL = 10 }
        }
    }
    effect = {
        custom_tooltip = tooltip_xvcv_mdlc_leader_skill_level_set_10
        hidden_effect = {
            xvcv_mdlc_leader_making_clear_skill_levels_effect = yes
            oxr_mdlc_leader_making_set_leader_skill_level = { LEVEL = 10 }
            oxr_mdlc_leader_making_increase_skill_level_costs = { LEVEL = 10 }
            oxr_mdlc_leader_making_find_maximum_trait_points_for_leader = { LEVEL = 10 }
        }
    }
}

###########################################
# COMMANDER BUTTON EFFECTS -- HAND EDITED #
###########################################

xvcv_mdlc_leader_making_commander_choose_subclass_box_bg_button_effect = {
    potential = { xvcv_mdlc_leader_making_commander_subclass_traits = no }
    allow = { always = yes }
}
#subclass_commander_admiral
xvcv_mdlc_leader_making_trait_subclass_commander_admiral_add_button_effect = {
    potential = { xvcv_mdlc_leader_making_commander_subclass_traits = no }
    allow = {
        xvcv_mdlc_leader_making_trait_pick_trigger = { CLASS = commander ID = subclass_commander_admiral }
        xvcv_mdlc_leader_making_trait_cost_trigger = yes
        xvcv_mdlc_leader_making_trait_points_trigger = yes
        xvcv_mdlc_leader_making_trait_max_number_trigger = yes
        xvcv_mdlc_leader_making_picked_class_commander_trigger = yes
        has_paragon_dlc = yes
    }
    effect = {
        xvcv_mdlc_leader_making_trait_pick_effect = { CLASS = commander ID = subclass_commander_admiral }
        hidden_effect = { xvcv_mdlc_leader_making_trait_count_points_costs_effect = yes }
    }
}
#subclass_commander_general
xvcv_mdlc_leader_making_trait_subclass_commander_general_add_button_effect = {
    potential = { xvcv_mdlc_leader_making_commander_subclass_traits = no }
    allow = {
        xvcv_mdlc_leader_making_trait_pick_trigger = { CLASS = commander ID = subclass_commander_general }
        xvcv_mdlc_leader_making_trait_cost_trigger = yes
        xvcv_mdlc_leader_making_trait_points_trigger = yes
        xvcv_mdlc_leader_making_trait_max_number_trigger = yes
        xvcv_mdlc_leader_making_picked_class_commander_trigger = yes
        has_paragon_dlc = yes
    }
    effect = {
        xvcv_mdlc_leader_making_trait_pick_effect = { CLASS = commander ID = subclass_commander_general }
        hidden_effect = { xvcv_mdlc_leader_making_trait_count_points_costs_effect = yes }
    }
}
#subclass_commander_governor
xvcv_mdlc_leader_making_trait_subclass_commander_governor_add_button_effect = {
    potential = { xvcv_mdlc_leader_making_commander_subclass_traits = no }
    allow = {
        xvcv_mdlc_leader_making_trait_pick_trigger = { CLASS = commander ID = subclass_commander_governor }
        xvcv_mdlc_leader_making_trait_cost_trigger = yes
        xvcv_mdlc_leader_making_trait_points_trigger = yes
        xvcv_mdlc_leader_making_trait_max_number_trigger = yes
        xvcv_mdlc_leader_making_picked_class_commander_trigger = yes
        has_paragon_dlc = yes
    }
    effect = {
        xvcv_mdlc_leader_making_trait_pick_effect = { CLASS = commander ID = subclass_commander_governor }
        hidden_effect = { xvcv_mdlc_leader_making_trait_count_points_costs_effect = yes }
    }
}
#subclass_commander_councilor
xvcv_mdlc_leader_making_trait_subclass_commander_councilor_add_button_effect = {
    potential = {
        xvcv_mdlc_leader_making_commander_subclass_traits = no
    }
    allow = {
        custom_tooltip_fail = {
            text = oxr_mdlc_leader_making_trait_subclass_requires_nongestalt
            root = { oxr_mdlc_is_individual_machine = yes }
        }
        xvcv_mdlc_leader_making_trait_pick_trigger = { CLASS = commander ID = subclass_commander_councilor }
        xvcv_mdlc_leader_making_trait_cost_trigger = yes
        xvcv_mdlc_leader_making_trait_points_trigger = yes
        xvcv_mdlc_leader_making_trait_max_number_trigger = yes
        xvcv_mdlc_leader_making_picked_class_commander_trigger = yes
        has_paragon_dlc = yes
    }
    effect = {
        xvcv_mdlc_leader_making_trait_pick_effect = { CLASS = commander ID = subclass_commander_councilor }
        hidden_effect = { xvcv_mdlc_leader_making_trait_count_points_costs_effect = yes }
    }
}
#subclass_commander_none
xvcv_mdlc_leader_official_xvcv_mdlc_subclass_commander_none_add_button_effect = {
    potential = { xvcv_mdlc_leader_making_commander_subclass_traits = no }
    allow = { xvcv_mdlc_leader_making_picked_class_commander_trigger = yes }
    effect = {
        xvcv_mdlc_leader_making_trait_pick_effect = { CLASS = commander ID = xvcv_mdlc_subclass_commander_none }
    }
}
#xvcv_mdlc_leader_trait_shared_memory #not exactly a veteran trait, but making it costs only 1 trait point will make it too powerful
xvcv_mdlc_leader_making_trait_commander_xvcv_mdlc_leader_trait_shared_memory_add_button_effect = {
    potential = { always = yes }
    allow = {
        xvcv_mdlc_leader_making_trait_pick_trigger = { CLASS = commander ID = xvcv_mdlc_leader_trait_shared_memory }
        xvcv_mdlc_leader_making_trait_cost_alt_trigger = yes
        xvcv_mdlc_leader_making_trait_points_alt_trigger = yes
        xvcv_mdlc_leader_making_trait_skill_level_alt_trigger = yes
        xvcv_mdlc_leader_making_trait_max_number_trigger = yes
        xvcv_mdlc_leader_making_picked_class_commander_trigger = yes
    }
    effect = {
        xvcv_mdlc_leader_making_trait_pick_effect = { CLASS = commander ID = xvcv_mdlc_leader_trait_shared_memory }
        hidden_effect = { xvcv_mdlc_leader_making_trait_count_points_costs_alt_effect = yes }
    }
}
#xvcv_mdlc_leader_trait_memory_backup #same as the above
xvcv_mdlc_leader_making_trait_commander_xvcv_mdlc_leader_trait_memory_backup_add_button_effect = {
    potential = { always = yes }
    allow = {
        xvcv_mdlc_leader_making_trait_pick_trigger = { CLASS = commander ID = xvcv_mdlc_leader_trait_memory_backup }
        xvcv_mdlc_leader_making_trait_cost_alt_trigger = yes
        xvcv_mdlc_leader_making_trait_points_alt_trigger = yes
        xvcv_mdlc_leader_making_trait_skill_level_alt_trigger = yes
        xvcv_mdlc_leader_making_trait_max_number_trigger = yes
        xvcv_mdlc_leader_making_picked_class_commander_trigger = yes
    }
    effect = {
        xvcv_mdlc_leader_making_trait_pick_effect = { CLASS = commander ID = xvcv_mdlc_leader_trait_memory_backup }
        hidden_effect = { xvcv_mdlc_leader_making_trait_count_points_costs_alt_effect = yes }
    }
}

#### END COMMANDER BUTTON EFFECTS ####

####################################################
# OFFICIAL-CLASS BUTTON EFFECTS -- MANUALLY EDITED #
####################################################
# These are here, and not in the _official_.yml file so that we can
# dump auto-generated button effects into that other file and
# not worry about blowing away not-auto-generated effects

xvcv_mdlc_leader_making_official_choose_subclass_box_bg_button_effect = {
    potential = { xvcv_mdlc_leader_making_official_subclass_traits = no }
    allow = { always = yes }
}
#subclass_official_governor
xvcv_mdlc_leader_making_trait_subclass_official_governor_add_button_effect = {
    potential = { xvcv_mdlc_leader_making_official_subclass_traits = no }
    allow = {
        xvcv_mdlc_leader_making_trait_pick_trigger = { CLASS = official ID = subclass_official_governor }
        xvcv_mdlc_leader_making_trait_cost_trigger = yes
        xvcv_mdlc_leader_making_trait_points_trigger = yes
        xvcv_mdlc_leader_making_trait_max_number_trigger = yes
        xvcv_mdlc_leader_making_picked_class_official_trigger = yes
        has_paragon_dlc = yes
    }
    effect = {
        xvcv_mdlc_leader_making_trait_pick_effect = { CLASS = official ID = subclass_official_governor }
        hidden_effect = { xvcv_mdlc_leader_making_trait_count_points_costs_effect = yes }
    }
}
#subclass_official_economy_councilor
xvcv_mdlc_leader_making_trait_subclass_official_economy_councilor_add_button_effect = {
    potential = {
        xvcv_mdlc_leader_making_official_subclass_traits = no
    }
    allow = {
        custom_tooltip_fail = {
            text = oxr_mdlc_leader_making_trait_subclass_requires_nongestalt
            root = { oxr_mdlc_is_individual_machine = yes }
        }
        xvcv_mdlc_leader_making_trait_pick_trigger = { CLASS = official ID = subclass_official_economy_councilor }
        xvcv_mdlc_leader_making_trait_cost_trigger = yes
        xvcv_mdlc_leader_making_trait_points_trigger = yes
        xvcv_mdlc_leader_making_trait_max_number_trigger = yes
        xvcv_mdlc_leader_making_picked_class_official_trigger = yes
        has_paragon_dlc = yes
    }
    effect = {
        xvcv_mdlc_leader_making_trait_pick_effect = { CLASS = official ID = subclass_official_economy_councilor }
        hidden_effect = { xvcv_mdlc_leader_making_trait_count_points_costs_effect = yes }
    }
}
#subclass_official_diplomacy_councilor
xvcv_mdlc_leader_making_trait_subclass_official_diplomacy_councilor_add_button_effect = {
    potential = {
        xvcv_mdlc_leader_making_official_subclass_traits = no
    }
    allow = {
        custom_tooltip_fail = {
            text = oxr_mdlc_leader_making_trait_subclass_requires_nongestalt
            root = { oxr_mdlc_is_individual_machine = yes }
        }
        xvcv_mdlc_leader_making_trait_pick_trigger = { CLASS = official ID = subclass_official_diplomacy_councilor }
        xvcv_mdlc_leader_making_trait_cost_trigger = yes
        xvcv_mdlc_leader_making_trait_points_trigger = yes
        xvcv_mdlc_leader_making_trait_max_number_trigger = yes
        xvcv_mdlc_leader_making_picked_class_official_trigger = yes
        has_paragon_dlc = yes
    }
    effect = {
        xvcv_mdlc_leader_making_trait_pick_effect = { CLASS = official ID = subclass_official_diplomacy_councilor }
        hidden_effect = { xvcv_mdlc_leader_making_trait_count_points_costs_effect = yes }
    }
}
#subclass_official_delegate
xvcv_mdlc_leader_making_trait_subclass_official_delegate_add_button_effect = {
    potential = { xvcv_mdlc_leader_making_official_subclass_traits = no }
    allow = {
        xvcv_mdlc_leader_making_trait_pick_trigger = { CLASS = official ID = subclass_official_delegate }
        xvcv_mdlc_leader_making_trait_cost_trigger = yes
        xvcv_mdlc_leader_making_trait_points_trigger = yes
        xvcv_mdlc_leader_making_trait_max_number_trigger = yes
        xvcv_mdlc_leader_making_picked_class_official_trigger = yes
        has_paragon_dlc = yes
    }
    effect = {
        xvcv_mdlc_leader_making_trait_pick_effect = { CLASS = official ID = subclass_official_delegate }
        hidden_effect = { xvcv_mdlc_leader_making_trait_count_points_costs_effect = yes }
    }
}
#subclass_official_none
xvcv_mdlc_leader_official_xvcv_mdlc_subclass_official_none_add_button_effect = {
    potential = { xvcv_mdlc_leader_making_official_subclass_traits = no }
    allow = { xvcv_mdlc_leader_making_picked_class_official_trigger = yes }
    effect = {
        xvcv_mdlc_leader_making_trait_pick_effect = { CLASS = official ID = xvcv_mdlc_subclass_official_none }
    }
}
#xvcv_mdlc_leader_trait_shared_memory #not exactly a veteran trait, but making it costs only 1 trait point will make it too powerful
xvcv_mdlc_leader_making_trait_official_xvcv_mdlc_leader_trait_shared_memory_add_button_effect = {
    potential = { always = yes }
    allow = {
        xvcv_mdlc_leader_making_trait_pick_trigger = { CLASS = official ID = xvcv_mdlc_leader_trait_shared_memory }
        xvcv_mdlc_leader_making_trait_cost_alt_trigger = yes
        xvcv_mdlc_leader_making_trait_points_alt_trigger = yes
        xvcv_mdlc_leader_making_trait_skill_level_alt_trigger = yes
        xvcv_mdlc_leader_making_trait_max_number_trigger = yes
        xvcv_mdlc_leader_making_picked_class_official_trigger = yes
    }
    effect = {
        xvcv_mdlc_leader_making_trait_pick_effect = { CLASS = official ID = xvcv_mdlc_leader_trait_shared_memory }
        hidden_effect = { xvcv_mdlc_leader_making_trait_count_points_costs_alt_effect = yes }
    }
}
#xvcv_mdlc_leader_trait_memory_backup #same as the above
xvcv_mdlc_leader_making_trait_official_xvcv_mdlc_leader_trait_memory_backup_add_button_effect = {
    potential = { always = yes }
    allow = {
        xvcv_mdlc_leader_making_trait_pick_trigger = { CLASS = official ID = xvcv_mdlc_leader_trait_memory_backup }
        xvcv_mdlc_leader_making_trait_cost_alt_trigger = yes
        xvcv_mdlc_leader_making_trait_points_alt_trigger = yes
        xvcv_mdlc_leader_making_trait_skill_level_alt_trigger = yes
        xvcv_mdlc_leader_making_trait_max_number_trigger = yes
        xvcv_mdlc_leader_making_picked_class_official_trigger = yes
    }
    effect = {
        xvcv_mdlc_leader_making_trait_pick_effect = { CLASS = official ID = xvcv_mdlc_leader_trait_memory_backup }
        hidden_effect = { xvcv_mdlc_leader_making_trait_count_points_costs_alt_effect = yes }
    }
}

########################################################
# SCIENTIST-CLASS BUTTON EFFECTS -- MANUALLY GENERATED #
########################################################
xvcv_mdlc_leader_making_scientist_choose_subclass_box_bg_button_effect = {
    potential = { xvcv_mdlc_leader_making_scientist_subclass_traits = no }
    allow = { always = yes }
}
#subclass_scientist_explorer
xvcv_mdlc_leader_making_trait_subclass_scientist_explorer_add_button_effect = {
    potential = { xvcv_mdlc_leader_making_scientist_subclass_traits = no }
    allow = {
        xvcv_mdlc_leader_making_trait_pick_trigger = { CLASS = scientist ID = subclass_scientist_explorer }
        xvcv_mdlc_leader_making_trait_cost_trigger = yes
        xvcv_mdlc_leader_making_trait_points_trigger = yes
        xvcv_mdlc_leader_making_trait_max_number_trigger = yes
        xvcv_mdlc_leader_making_picked_class_scientist_trigger = yes
        has_paragon_dlc = yes
    }
    effect = {
        xvcv_mdlc_leader_making_trait_pick_effect = { CLASS = scientist ID = subclass_scientist_explorer }
        hidden_effect = { xvcv_mdlc_leader_making_trait_count_points_costs_effect = yes }
    }
}
#subclass_scientist_scholar
xvcv_mdlc_leader_making_trait_subclass_scientist_scholar_add_button_effect = {
    potential = { xvcv_mdlc_leader_making_scientist_subclass_traits = no }
    allow = {
        xvcv_mdlc_leader_making_trait_pick_trigger = { CLASS = scientist ID = subclass_scientist_scholar }
        xvcv_mdlc_leader_making_trait_cost_trigger = yes
        xvcv_mdlc_leader_making_trait_points_trigger = yes
        xvcv_mdlc_leader_making_trait_max_number_trigger = yes
        xvcv_mdlc_leader_making_picked_class_scientist_trigger = yes
        has_paragon_dlc = yes
    }
    effect = {
        xvcv_mdlc_leader_making_trait_pick_effect = { CLASS = scientist ID = subclass_scientist_scholar }
        hidden_effect = { xvcv_mdlc_leader_making_trait_count_points_costs_effect = yes }
    }
}
#subclass_scientist_councilor
xvcv_mdlc_leader_making_trait_subclass_scientist_councilor_add_button_effect = {
    potential = {
        xvcv_mdlc_leader_making_scientist_subclass_traits = no
    }
    allow = {
        custom_tooltip_fail = {
            text = oxr_mdlc_leader_making_trait_subclass_requires_nongestalt
            root = { oxr_mdlc_is_individual_machine = yes }
        }
        xvcv_mdlc_leader_making_trait_pick_trigger = { CLASS = scientist ID = subclass_scientist_councilor }
        xvcv_mdlc_leader_making_trait_cost_trigger = yes
        xvcv_mdlc_leader_making_trait_points_trigger = yes
        xvcv_mdlc_leader_making_trait_max_number_trigger = yes
        xvcv_mdlc_leader_making_picked_class_scientist_trigger = yes
        has_paragon_dlc = yes
    }
    effect = {
        xvcv_mdlc_leader_making_trait_pick_effect = { CLASS = scientist ID = subclass_scientist_councilor }
        hidden_effect = { xvcv_mdlc_leader_making_trait_count_points_costs_effect = yes }
    }
}
#subclass_scientist_governor
xvcv_mdlc_leader_making_trait_subclass_scientist_governor_add_button_effect = {
    potential = { xvcv_mdlc_leader_making_scientist_subclass_traits = no }
    allow = {
        xvcv_mdlc_leader_making_trait_pick_trigger = { CLASS = scientist ID = subclass_scientist_governor }
        xvcv_mdlc_leader_making_trait_cost_trigger = yes
        xvcv_mdlc_leader_making_trait_points_trigger = yes
        xvcv_mdlc_leader_making_trait_max_number_trigger = yes
        xvcv_mdlc_leader_making_picked_class_scientist_trigger = yes
        has_paragon_dlc = yes
    }
    effect = {
        xvcv_mdlc_leader_making_trait_pick_effect = { CLASS = scientist ID = subclass_scientist_governor }
        hidden_effect = { xvcv_mdlc_leader_making_trait_count_points_costs_effect = yes }
    }
}
#subclass_scientist_none
xvcv_mdlc_leader_official_xvcv_mdlc_subclass_scientist_none_add_button_effect = {
    potential = { xvcv_mdlc_leader_making_scientist_subclass_traits = no }
    allow = { xvcv_mdlc_leader_making_picked_class_scientist_trigger = yes }
    effect = {
        xvcv_mdlc_leader_making_trait_pick_effect = { CLASS = scientist ID = xvcv_mdlc_subclass_scientist_none }
    }
}
#xvcv_mdlc_leader_trait_shared_memory #not exactly a veteran trait, but making it costs only 1 trait point will make it too powerful
xvcv_mdlc_leader_making_trait_scientist_xvcv_mdlc_leader_trait_shared_memory_add_button_effect = {
    potential = { always = yes }
    allow = {
        xvcv_mdlc_leader_making_trait_pick_trigger = { CLASS = scientist ID = xvcv_mdlc_leader_trait_shared_memory }
        xvcv_mdlc_leader_making_trait_cost_alt_trigger = yes
        xvcv_mdlc_leader_making_trait_points_alt_trigger = yes
        xvcv_mdlc_leader_making_trait_skill_level_alt_trigger = yes
        xvcv_mdlc_leader_making_trait_max_number_trigger = yes
        xvcv_mdlc_leader_making_picked_class_scientist_trigger = yes
    }
    effect = {
        xvcv_mdlc_leader_making_trait_pick_effect = { CLASS = scientist ID = xvcv_mdlc_leader_trait_shared_memory }
        hidden_effect = { xvcv_mdlc_leader_making_trait_count_points_costs_alt_effect = yes }
    }
}
#xvcv_mdlc_leader_trait_memory_backup #same as the above
xvcv_mdlc_leader_making_trait_scientist_xvcv_mdlc_leader_trait_memory_backup_add_button_effect = {
    potential = { always = yes }
    allow = {
        xvcv_mdlc_leader_making_trait_pick_trigger = { CLASS = scientist ID = xvcv_mdlc_leader_trait_memory_backup }
        xvcv_mdlc_leader_making_trait_cost_alt_trigger = yes
        xvcv_mdlc_leader_making_trait_points_alt_trigger = yes
        xvcv_mdlc_leader_making_trait_skill_level_alt_trigger = yes
        xvcv_mdlc_leader_making_trait_max_number_trigger = yes
        xvcv_mdlc_leader_making_picked_class_scientist_trigger = yes
    }
    effect = {
        xvcv_mdlc_leader_making_trait_pick_effect = { CLASS = scientist ID = xvcv_mdlc_leader_trait_memory_backup }
        hidden_effect = { xvcv_mdlc_leader_making_trait_count_points_costs_alt_effect = yes }
    }
}
