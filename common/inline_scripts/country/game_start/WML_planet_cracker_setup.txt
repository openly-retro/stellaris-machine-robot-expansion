			if = {
				limit = { prev = { has_valid_civic = xvcv_mdlc_civic_planet_cracker } }
				solar_system = {
					#search an eligible planet first
					random_system_planet = {
						limit = {
							is_star = no
							is_colony = no
							is_colonizable = no
							# asteroids are deleted in generate_home_planet_final_pass for "Resource Consolidation" origin
							is_asteroid = no
							NOR = {
								is_planet_class = pc_shattered
								is_planet_class = pc_ringworld_habitable_damaged
								is_planet_class = pc_ringworld_tech
								is_planet_class = pc_ringworld_tech_damaged
								is_planet_class = pc_ringworld_seam
								is_planet_class = pc_ringworld_seam_damaged
							}
						}
						save_event_target_as = xvcv_mdlc_civic_planet_cracker_target
					}
					#search an eligible planet again with more wide conditions
					random_system_planet = {
						limit = {
							NOT = { exists = event_target:xvcv_mdlc_civic_planet_cracker_target }
							is_star = no
							is_colony = no
							is_colonizable = no
							is_asteroid = no
						}
						save_event_target_as = xvcv_mdlc_civic_planet_cracker_target
					}
					#search an eligible planet for the last time with 'far more' wide conditions #there must be one in this case
					random_system_planet = {
						limit = {
							NOT = { exists = event_target:xvcv_mdlc_civic_planet_cracker_target }
							is_star = no
							is_colony = no
							is_asteroid = no
						}
						save_event_target_as = xvcv_mdlc_civic_planet_cracker_target
					}
					if = {
						limit = { exists = event_target:xvcv_mdlc_civic_planet_cracker_target }
						event_target:xvcv_mdlc_civic_planet_cracker_target = {
							set_planet_flag = xvcv_mdlc_planet_cracker_placed
							prev = {
								spawn_megastructure = {
									type = xvcv_mdlc_planet_cracker
									planet = prev
									orbit_distance = 0
									owner = space_owner
								}
							}
							clear_deposits = yes
							if = {
								limit = { exists = orbital_station }
								orbital_station = { dismantle = yes }
							}
							if = {
								limit = { planet_size > 10 }
								set_planet_size = 10
							}
							if = {
								limit = {
									NOR = {
										is_planet_class = pc_shattered
										is_planet_class = pc_habitat
										is_planet_class = pc_ringworld_habitable
										is_planet_class = pc_ringworld_habitable_damaged
										is_planet_class = pc_ringworld_tech
										is_planet_class = pc_ringworld_tech_damaged
										is_planet_class = pc_ringworld_seam
										is_planet_class = pc_ringworld_seam_damaged
									}
								}
								change_pc = pc_shattered
							}
							else_if = {
								limit = { is_planet_class = pc_habitat }
								remove_planet = yes
								spawn_habitat_cracker_effect = yes
							}
							# else_if = {
							# 	limit = { is_planet_class = pc_ringworld_habitable }
							# 	change_pc = pc_ringworld_habitable_damaged
							# 	spawn_ringworld_cracker_effect = yes
							# }
							# else_if = {
							# 	limit = { is_planet_class = pc_ringworld_tech }
							# 	change_pc = pc_ringworld_tech_damaged
							# 	spawn_ringworld_cracker_effect = yes
							# }
							# else_if = {
							# 	limit = { is_planet_class = pc_ringworld_seam }
							# 	change_pc = pc_ringworld_seam_damaged
							# 	spawn_ringworld_cracker_effect = yes
							# }
						
							# print_scope_effect = yes 
							if = {
								limit = { root = { has_technology = xvcv_mdlc_tech_orbital_cracker_upgrade_1 } }
								add_deposit = d_minerals_4
							}
							if = {
								limit = { root = { has_technology = xvcv_mdlc_tech_orbital_cracker_upgrade_2 } }
								add_deposit = d_minerals_6
							}
							add_deposit = d_minerals_10
						}
					}
				}
				# World machine origin, with orbital cracker
                if = {
                    limit = { prev = { has_origin = oxr_mdlc_origin_world_machine_awakened } }
                    while = {
                        limit = { has_district = xvcv_mdlc_pc_machine_auto_district_mining }
                        remove_district = xvcv_mdlc_pc_machine_auto_district_mining
						if = {
							limit = { prev = { has_valid_civic = civic_machine_astromining_drones } }
                        	add_district = xvcv_mdlc_pc_machine_auto_district_generator
						}
                    }
					# Starting with Catalytic civic
					# if = {
					# 	limit = {
					# 		prev = {
					# 			country_uses_food = yes
					# 		}
					# 	}
					# 	# Remove one main district because of a food deficit from alloy production
					# 	remove_district = xvcv_mdlc_pc_machine_auto_district_industrial_origin_wm
					# }

					# seems it's prudent to remove one primary district in most cases
					remove_district = xvcv_mdlc_pc_machine_auto_district_industrial_origin_wm
                }
                else = {
                    if = {
                        limit = { has_district = district_mining }
                        remove_district = district_mining
                    }
                    else_if = {
                        limit = { has_district = district_mining_uncapped }
                        remove_district = district_mining_uncapped
                    }
                    add_district = district_nexus
                    while = {
                        limit = { has_district = district_mining }
                        remove_district = district_mining
                        add_district = district_generator
                    }
                    while = {
                        limit = { has_district = district_mining_uncapped }
                        remove_district = district_mining_uncapped
                        add_district = district_generator_uncapped
                    }
                }
			}
