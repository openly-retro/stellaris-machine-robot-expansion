# Zones that can be shared across WM types
oxr_mdlc_origin_wm_zone_default = {
	icon = GFX_diplomatic_weight_large
	base_buildtime = @zone_buildtime
	potential = {
		hidden_trigger = { exists = owner }
		is_planet_world_machine = yes
	}

	unlock = { is_planet_world_machine = yes }

	resources = {
		category = planet_zones
		cost = {
			minerals = @zone_cost
		}
	}
	max_buildings = 6
	include = { all }
	excluded_building_sets = { 
		knights
		generator_automation
		mining_automation
		farming_automation
		urban_automation
	}
	zone_sets = {
		oxr_mdlc_zone_set_wm_default
	}

}

# Placeholder zone
oxr_mdlc_zone_none = {
	icon = GFX_diplomatic_weight_large
	base_buildtime = 1
	potential = {
		# hidden_trigger = { exists = owner }
		# is_xvcv_mdlc_pc_ringworld_machine_auto = yes
		always = no
	}
	unlock = { always = no }
	resources = {
		category = oxr_mdlc_world_machines_zones
		cost = {
			energy = 1
		}
	}
	max_buildings = 0

	included_building_sets = {
		research
		oxr_mdlc_building_set_wm_research
	}

	excluded_building_sets = { 
		knights
		generator_automation
		mining_automation
		farming_automation
		urban_automation
	}
	zone_sets = {
		oxr_mdlc_zone_set_none
	}
}

# Any building from any set
oxr_mdlc_origin_wm_zone_any = {
	icon = GFX_colony_type_urban
	inline_script = planet/zones/oxr_wm_zone_base

	country_modifier = { country_resource_max_add = 1500 }

	max_buildings = 3
	include = { all }
	excluded_building_sets = { 
		knights
		generator_automation
		mining_automation
		farming_automation
		urban_automation
	}
	planet_modifier = {
		zone_building_slots_add = 3
	}
	zone_sets = { oxr_mdlc_zone_set_wm }
}

# Any building in the world-machine set
oxr_mdlc_origin_wm_zone_any_wm = {
	icon = GFX_colony_type_urban
	inline_script = planet/zones/oxr_wm_zone_base

	country_modifier = { country_resource_max_add = 3000 }
	included_building_sets = {
		oxr_mdlc_building_set_wm_all
	}
	excluded_building_sets = { 
		knights
		generator_automation
		mining_automation
		farming_automation
		urban_automation
	}
	zone_sets = {
		oxr_mdlc_zone_set_wm
	}
	planet_modifier = {
		zone_building_slots_add = 3
	}
}

# Archive
oxr_mdlc_zone_wm_research_unity = {
	icon = GFX_district_specialization_bureaucrat
	inline_script = planet/zones/oxr_wm_zone_base
	
	triggered_district_planet_modifier = {
		potential = { always = yes }
		# If base game adds 20 jobs but 100 jobs produces the base/full job amount, then
		# adding 20 jobs is really 20% of the full amount of 100 pops
		oxr_mdlc_world_machines_auto_capital_physics_research_produces_add = @[ 0.2 * oxr_mdlc_wm_base_calculator_single_output ]
		oxr_mdlc_world_machines_auto_capital_engineering_research_produces_add = @[ 0.2 * oxr_mdlc_wm_base_calculator_single_output ]
		oxr_mdlc_world_machines_auto_capital_society_research_produces_add = @[ 0.2 * oxr_mdlc_wm_base_calculator_single_output ]
		oxr_mdlc_world_machines_auto_capital_unity_produces_add = @[ 0.4 * oxr_mdlc_wm_base_coordinator_output ]
	}

	included_building_sets = {
		oxr_mdlc_building_set_wm_research
		oxr_mdlc_building_set_wm_unity
	}
	excluded_building_sets = {
		inline_script = planet/zones/oxr_exclude_automation_buildings
	}
	zone_sets = {
		oxr_mdlc_zone_set_wm_research
		oxr_mdlc_zone_set_wm_primary
	}
	planet_modifier = {
		zone_building_slots_add = 3
	}
}

oxr_mdlc_zone_wm_food_biology = {
	icon = GFX_district_specialization_society
	inline_script = planet/zones/oxr_wm_zone_base

	# swap_type = district_farming_society
	# swap_type_weight = 5

	unlock = {
		hidden_trigger = { exists = owner }
		owner = {
			oxr_mdlc_planet_owner_can_build_wm_districts = yes
			has_technology = tech_society_2
		}
	}
	zone_sets = {
		# oxr_mdlc_zone_set_wm_research
		oxr_mdlc_zone_set_wm_food
	}

	included_building_sets = {
		farming
		hydroponics
		society
		# farming_automation
		oxr_mdlc_building_set_wm_food
		oxr_mdlc_building_set_wm_research
	}
	excluded_building_sets = {
		inline_script = planet/zones/oxr_exclude_automation_buildings
	}
	
	# This is my equivalent of adding 'jobs'
	triggered_district_planet_modifier = {
		potential = { is_xvcv_mdlc_pc_ringworld_machine_auto = no }
		# zone_farmers_add
		oxr_mdlc_world_machines_auto_capital_food_produces_add = @[ 0.5 * oxr_mdlc_wm_base_farmer_output ]
		# zone_biologists_add
		oxr_mdlc_world_machines_auto_capital_society_research_produces_add = @[ 0.5 * oxr_mdlc_wm_base_calculator_single_output ]
	}
	# base game "LARGE AMOUNT" modifier goes up to x5, let's see how this pans out
	# triggered_district_planet_modifier = {
	# 	potential = { is_xvcv_mdlc_pc_ringworld_machine_auto = yes }
	# 	oxr_mdlc_world_machines_auto_capital_food_produces_add = @[ 2.5 * oxr_mdlc_wm_base_farmer_output ]
	# 	oxr_mdlc_world_machines_auto_capital_society_research_produces_add = @[ 2.5 * oxr_mdlc_wm_base_calculator_single_output ]
	# 	mult = 5
	# }

	planet_modifier = {
		# Food production malus
		oxr_mdlc_world_machines_food_structures_produces_mult = @oxr_mdlc_zone_rural_research_worker_produces_mult
	}

	triggered_district_planet_modifier = {
		potential = {
			always = yes
		}
		xvcv_mdlc_world_machines_science_districts_society_research_produces_mult = @oxr_mdlc_zone_rural_research_research_produces_mult
		oxr_mdlc_world_machines_science_buildings_society_research_produces_mult = @oxr_mdlc_zone_rural_research_research_produces_mult
		xvcv_mdlc_world_machines_science_districts_food_upkeep_add = @oxr_mdlc_zone_rural_research_researcher_upkeep_add
		oxr_mdlc_world_machines_science_buildings_food_upkeep_add = @oxr_mdlc_zone_rural_research_researcher_upkeep_add
	}

	planet_modifier = {
		zone_building_slots_add = 3
	}

	# show_in_tech = tech_society_2

	ai_priority = 13
	
}

oxr_mdlc_zone_wm_minerals_engineering = {
	icon = GFX_district_specialization_engineering
	inline_script = planet/zones/oxr_wm_zone_base

	triggered_district_planet_modifier = {
		# In the base game, this modifier would add mining jobs, that then benefit from production multipliers
		# so, boost this amount
		potential = { is_xvcv_mdlc_pc_ringworld_machine_auto = no }
		oxr_mdlc_world_machines_auto_capital_minerals_produces_add = @[ 0.5 * oxr_mdlc_wm_base_miner_output ]
		# mult = modifier:xvcv_mdlc_world_machines_mining_districts_produces_mult
	}
	triggered_planet_modifier = {
		potential = { is_xvcv_mdlc_pc_ringworld_machine_auto = yes }
		oxr_mdlc_world_machines_auto_capital_engineering_research_produces_add = @[ 2.5 * oxr_mdlc_wm_base_calculator_single_output ]
		# mult = modifier:xvcv_mdlc_world_machines_science_districts_produces_mult
	}

	planet_modifier = {		
		oxr_mdlc_world_machines_minerals_structures_produces_mult = @zone_rural_research_worker_produces_mult
	}

	triggered_district_planet_modifier = {
		potential = { always = yes }
		oxr_mdlc_world_machines_science_buildings_engineering_research_produces_mult = @zone_rural_research_research_produces_mult
		xvcv_mdlc_world_machines_science_districts_engineering_research_produces_mult = @zone_rural_research_research_produces_mult
		oxr_mdlc_world_machines_science_buildings_minerals_upkeep_add = @zone_rural_research_researcher_upkeep_add
		xvcv_mdlc_world_machines_science_districts_minerals_upkeep_add = @zone_rural_research_researcher_upkeep_add
	}

	zone_sets = {
		# minerals
		# habitat_urban
		oxr_mdlc_zone_set_wm_minerals
	}

	included_building_sets = {
		mining
		engineering
		fallen_empire_mining
		# mining_automation
		oxr_mdlc_building_set_wm_minerals
		oxr_mdlc_building_set_wm_research
	}
	planet_modifier = {
		zone_building_slots_add = 3
	}

	# triggered_desc = {
	# 	trigger = {
	# 		always = yes
	# 	}
	# 	text = zone_minerals_triggered_desc
	# }

	# show_in_tech = tech_engineering_2

	ai_priority = 13
}

oxr_mdlc_zone_wm_energy_physics = {
	icon = GFX_district_specialization_physics
	inline_script = planet/zones/oxr_wm_zone_base_auto

	# swap_type = district_generator_physics
	# swap_type_weight = 5

	unlock = { # planet scope
		hidden_trigger = { exists = owner }
		owner = {
			oxr_mdlc_planet_owner_can_build_wm_districts = yes
			has_technology = tech_physics_2
		}
	}

	zone_sets = {
		oxr_mdlc_zone_set_wm_energy
	}

	included_building_sets = {
		generator
		physics
		fallen_empire_generator
		# generator_automation
		oxr_mdlc_building_set_wm_research
		oxr_mdlc_building_set_wm_energy
	}
	excluded_building_sets = {
		inline_script = planet/zones/oxr_exclude_automation_buildings
	}

	triggered_district_planet_modifier = {
		potential = { is_xvcv_mdlc_pc_machine_auto = yes }
		oxr_mdlc_world_machines_auto_capital_energy_produces_add = @[ 0.5 * oxr_mdlc_wm_base_technician_output ]
		oxr_mdlc_world_machines_auto_capital_physics_research_produces_add = @[ 0.5 * oxr_mdlc_wm_base_calculator_single_output ]
	}
	# base game "LARGE AMOUNT" modifier goes up to x5, let's see how this pans out
	# triggered_district_planet_modifier = {
	# 	potential = { is_xvcv_mdlc_pc_ringworld_machine_auto = yes }
	# 	oxr_mdlc_world_machines_auto_capital_energy_produces_add = @[ 0.5 * oxr_mdlc_wm_base_technician_output ]
	# 	oxr_mdlc_world_machines_auto_capital_physics_research_produces_add = @[ 0.5 * oxr_mdlc_wm_base_calculator_single_output ]
	# 	mult = 5
	# }

	planet_modifier = {
		custom_tooltip = oxr_mdlc_world_machines_energy_structures_produces_mult_tt
		oxr_mdlc_world_machines_energy_structures_produces_mult = @oxr_mdlc_zone_rural_research_worker_produces_mult
	}

	triggered_district_planet_modifier = {
		potential = {
			always = yes
		}
		xvcv_mdlc_world_machines_science_districts_physics_research_produces_mult = @oxr_mdlc_zone_rural_research_research_produces_mult
		oxr_mdlc_world_machines_science_buildings_physics_research_produces_mult = @oxr_mdlc_zone_rural_research_research_produces_mult
		xvcv_mdlc_world_machines_science_districts_energy_upkeep_add = @oxr_mdlc_zone_rural_research_researcher_upkeep_add
		oxr_mdlc_world_machines_science_buildings_energy_upkeep_add = @oxr_mdlc_zone_rural_research_researcher_upkeep_add
	}

	planet_modifier = {
		zone_building_slots_add = 3
	}

	# show_in_tech = tech_physics_2

	ai_priority = 13
}

oxr_mdlc_zone_wm_primary_urban_energy = {
	icon = GFX_oxr_mdlc_wm_district_specialization_resource_energy_add
	inline_script = planet/zones/oxr_wm_zone_base

	triggered_district_planet_modifier = {
		potential = { is_xvcv_mdlc_pc_ringworld_machine_auto = no }
		oxr_mdlc_world_machines_auto_capital_trade_produces_add = @[ 0.5 * oxr_mdlc_wm_base_logistics_drone_output ]
	}
	# base game "LARGE AMOUNT" modifier goes up to x5, let's see how this pans out
	triggered_planet_modifier = {
		potential = { is_xvcv_mdlc_pc_ringworld_machine_auto = yes }
		oxr_mdlc_world_machines_auto_capital_trade_produces_add = @[ 0.5 * oxr_mdlc_wm_base_logistics_drone_output ]
		mult = 5
	}

	max_buildings = 0

	zone_sets = {
		oxr_mdlc_zone_set_wm_primary
	}

	included_building_sets = {
		generator
		physics
		fallen_empire_generator
		# generator_automation
		oxr_mdlc_building_set_wm_research
		oxr_mdlc_building_set_wm_energy
	}
	excluded_building_sets = {
		inline_script = planet/zones/oxr_exclude_automation_buildings
	}

	triggered_district_planet_modifier = {
		potential = {
			is_xvcv_mdlc_pc_ringworld_machine_auto = no
		}
		# Make trade upkeep roughly equal to 25% of production
		oxr_mdlc_world_machines_energy_structures_produces_mult = @oxr_mdlc_zone_urban_rural_worker_produces_mult
		oxr_mdlc_world_machines_generator_buildings_trade_upkeep_add = @oxr_mdlc_zone_urban_rural_worker_trade_upkeep_add
		xvcv_mdlc_world_machines_generator_districts_trade_upkeep_add = @oxr_mdlc_zone_urban_rural_worker_trade_upkeep_add

	}

	triggered_district_planet_modifier = {
		potential = {
			is_xvcv_mdlc_pc_ringworld_machine_auto = yes
		}
		xvcv_mdlc_world_machines_raw_resources_districts_energy_produces_mult = @oxr_mdlc_zone_urban_rural_worker_produces_mult
		oxr_mdlc_world_machines_generator_buildings_produces_mult = @oxr_mdlc_zone_urban_rural_worker_produces_mult
		xvcv_mdlc_world_machines_raw_resources_districts_trade_upkeep_add = @oxr_mdlc_zone_urban_rural_worker_trade_upkeep_add
		oxr_mdlc_world_machines_generator_buildings_trade_upkeep_add = @oxr_mdlc_zone_urban_rural_worker_trade_upkeep_add
		mult = 5
	}

	ai_priority = 13
}

oxr_mdlc_zone_wm_primary_urban_food = {
	inline_script = planet/zones/oxr_wm_zone_base
	icon = GFX_oxr_mdlc_wm_district_specialization_resource_food_add

	triggered_district_planet_modifier = {
		potential = { is_xvcv_mdlc_pc_ringworld_machine_auto = no }
		oxr_mdlc_world_machines_auto_capital_trade_produces_add = @[ 0.5 * oxr_mdlc_wm_base_logistics_drone_output ]
	}
	# base game "LARGE AMOUNT" modifier goes up to x5, let's see how this pans out
	triggered_planet_modifier = {
		potential = { is_xvcv_mdlc_pc_ringworld_machine_auto = yes }
		oxr_mdlc_world_machines_auto_capital_trade_produces_add = @[ 0.5 * oxr_mdlc_wm_base_logistics_drone_output ]
		mult = 5
	}

	max_buildings = 0

	zone_sets = {
		oxr_mdlc_zone_set_wm_primary
	}

	included_building_sets = {
		farming
		hydroponics
		urban
		oxr_mdlc_building_set_wm_food
	}
	# 20% bonus to food

	triggered_district_planet_modifier = {
		potential = {
			is_xvcv_mdlc_pc_ringworld_machine_auto = no
		}
		oxr_mdlc_world_machines_food_structures_produces_mult = @oxr_mdlc_zone_urban_rural_worker_produces_mult
		xvcv_mdlc_world_machines_food_districts_trade_upkeep_add = @oxr_mdlc_zone_urban_rural_worker_trade_upkeep_add
		oxr_mdlc_world_machines_food_buildings_trade_upkeep_add = @oxr_mdlc_zone_urban_rural_worker_trade_upkeep_add
	}

	triggered_district_planet_modifier = {
		potential = {
			is_xvcv_mdlc_pc_ringworld_machine_auto = yes
		}
		oxr_mdlc_world_machines_food_buildings_produces_mult = @oxr_mdlc_zone_urban_rural_worker_produces_mult
		xvcv_mdlc_world_machines_raw_resources_districts_food_produces_mult = @oxr_mdlc_zone_urban_rural_worker_produces_mult
		oxr_mdlc_world_machines_food_buildings_trade_upkeep_add = @oxr_mdlc_zone_urban_rural_worker_trade_upkeep_add
		xvcv_mdlc_world_machines_raw_resources_districts_trade_upkeep_add = @oxr_mdlc_zone_urban_rural_worker_trade_upkeep_add
		mult = 5
	}

	# triggered_desc = {
	# 	trigger = {
	# 		always = yes
	# 	}
	# 	text = zone_urban_triggered_desc
	# }

	ai_priority = 13
}

oxr_mdlc_zone_wm_primary_urban_minerals = {
	icon = GFX_oxr_mdlc_wm_district_specialization_resource_minerals_add
	inline_script = planet/zones/oxr_wm_zone_base

	zone_sets = {
		oxr_mdlc_zone_set_wm_primary
	}

	# Pseudo job add
	triggered_district_planet_modifier = {
		potential = { is_xvcv_mdlc_pc_ringworld_machine_auto = no }
		oxr_mdlc_world_machines_auto_capital_trade_produces_add = @[ 0.5 * oxr_mdlc_wm_base_logistics_drone_output ]
	}
	triggered_district_planet_modifier = {
		potential = { is_xvcv_mdlc_pc_ringworld_machine_auto = yes }
		oxr_mdlc_world_machines_auto_capital_trade_produces_add = @[ 0.5 * oxr_mdlc_wm_base_logistics_drone_output ]
		mult = 5
	}

	max_buildings = 0

	included_building_sets = {
		mining
		urban
		fallen_empire_mining
		oxr_mdlc_building_set_wm_minerals
	}

	triggered_district_planet_modifier = {
		potential = { is_xvcv_mdlc_pc_ringworld_machine_auto = no }
		oxr_mdlc_world_machines_minerals_structures_produces_mult = @oxr_mdlc_zone_urban_rural_worker_produces_mult
		xvcv_mdlc_world_machines_mining_districts_trade_upkeep_add = @oxr_mdlc_zone_urban_rural_worker_trade_upkeep_add
		oxr_mdlc_world_machines_mining_buildings_trade_upkeep_add = @oxr_mdlc_zone_urban_rural_worker_trade_upkeep_add
	}

	triggered_district_planet_modifier = {
		potential = {
			is_xvcv_mdlc_pc_ringworld_machine_auto = yes
		}
		oxr_mdlc_world_machines_minerals_structures_produces_mult = @oxr_mdlc_zone_urban_rural_worker_produces_mult
		xvcv_mdlc_world_machines_mining_districts_trade_upkeep_add = @oxr_mdlc_zone_urban_rural_worker_trade_upkeep_add
		oxr_mdlc_world_machines_mining_buildings_trade_upkeep_add = @oxr_mdlc_zone_urban_rural_worker_trade_upkeep_add
		mult = 5
	}

	ai_priority = 13
}
