# Renaming a lot of these vars to avoid any potential conflict
# with core-modifying and leader-making vars
# Default amount of trait points
@oxr_mdlc_councilor_editor_base_num_trait_points = 4
# Values with T1 and T2 core modifying techs, respectively
@oxr_mdlc_councilor_editor_base_num_trait_points_t1 = 5
@oxr_mdlc_councilor_editor_base_num_trait_points_t2 = 6

# Default number of trait picks
@oxr_mdlc_councilor_editor_base_num_trait_picks = 3
# Values with T1 and T2 core modifying techs, respectively
@oxr_mdlc_councilor_editor_base_num_trait_picks_t1 = 4  # unused
@oxr_mdlc_councilor_editor_base_num_trait_picks_t2 = 5  # unused

# How many trait points does each tier of trait cost to apply to the ruler
@oxr_mdlc_councilor_editor_common_trait_points_cost = 1
@oxr_mdlc_councilor_editor_veteran_trait_points_cost = 2
@oxr_mdlc_councilor_editor_destiny_trait_points_cost = 3

# These numbers are applied to both energy costs, and alloy costs
@oxr_mdlc_councilor_editor_common_trait_cost = 200
@oxr_mdlc_councilor_editor_common_trait_refund = 100
@oxr_mdlc_councilor_editor_veteran_trait_cost = 500
@oxr_mdlc_councilor_editor_veteran_trait_refund = 250
@oxr_mdlc_councilor_editor_destiny_trait_cost = 1000
@oxr_mdlc_councilor_editor_destiny_trait_refund = 500

# Resources check
oxr_mdlc_councilor_editor_check_trait_resources_cost_common = {
    optimize_memory
    custom_tooltip_fail = {
        text = oxr_mdlc_councilor_editor_trait_cost.fail_common
        has_country_resource = { type = energy amount >= @oxr_mdlc_councilor_editor_common_trait_cost }
        has_country_resource = { type = alloys amount >= @oxr_mdlc_councilor_editor_common_trait_cost }
    }
}
oxr_mdlc_councilor_editor_check_trait_resources_cost_veteran = {
    optimize_memory
    custom_tooltip_fail = {
        text = oxr_mdlc_councilor_editor_trait_cost.fail_veteran
        has_country_resource = { type = energy amount >= @oxr_mdlc_councilor_editor_veteran_trait_cost }
        has_country_resource = { type = alloys amount >= @oxr_mdlc_councilor_editor_veteran_trait_cost }
    }
}
oxr_mdlc_councilor_editor_check_trait_resources_cost_paragon = {
    optimize_memory
    custom_tooltip_fail = {
        text = oxr_mdlc_councilor_editor_trait_cost.fail_paragon
        has_country_resource = { type = energy amount >= @oxr_mdlc_councilor_editor_destiny_trait_cost }
        has_country_resource = { type = alloys amount >= @oxr_mdlc_councilor_editor_destiny_trait_cost }
    }
}
# Traits points check
oxr_mdlc_councilor_editor_check_trait_points_cost_common = {
    optimize_memory
    custom_tooltip_fail = {
        text = oxr_mdlc_councilor_editor_trait_points.fail
        check_variable = { which = oxr_mdlc_councilor_editor_trait_points value >= 1 }
    }
}
oxr_mdlc_councilor_editor_check_trait_points_cost_veteran = {
    optimize_memory
    custom_tooltip_fail = {
        text = oxr_mdlc_councilor_editor_trait_points.fail
        check_variable = { which = oxr_mdlc_councilor_editor_trait_points value >= 2 }
    }
}
oxr_mdlc_councilor_editor_check_trait_points_cost_paragon = {
    optimize_memory
    custom_tooltip_fail = {
        text = oxr_mdlc_councilor_editor_trait_points.fail
        check_variable = { which = oxr_mdlc_councilor_editor_trait_points value >= 3 }
    }
}
# trait picks check
oxr_mdlc_councilor_editor_check_trait_picks = {
    optimize_memory
    custom_tooltip_fail = {
        text = oxr_mdlc_councilor_editor_max_traits_number.fail
        check_variable = { which = oxr_mdlc_councilor_editor_trait_picks value > 0 }
    }
}
oxr_mdlc_councilor_editor_check_can_use_reset_button_wrapper = {
    optimize_memory
    custom_tooltip = oxr_mdlc_councilor_editor_reset_button_tooltip_1
    custom_tooltip_fail = {
        text = oxr_mdlc_councilor_editor_reset_button_tooltip.fail
        event_target:oxr_mdlc_councilor_editor_target = {
            oxr_mdlc_councilor_editor_check_can_use_reset_button = yes
        }
    }
}

# oxr_mdlc_councilor_editor_check_can_use_reset_button is now autogenerated

# subclass check
oxr_mdlc_councilor_editor_check_leader_has_required_subclass = {
    # $REQ_SUBCLASS$
    # $TRAIT_NAME
    optimize_memory
    custom_tooltip_fail = {
        text = xvcv_mdlc_core_modifying_requires_$CLASS$_$SUBCLASS$_tooltip.fail
        has_trait = $SUBCLASS$
    }
}

# General
oxr_mdlc_councilor_editor_feature_enabled = {
    optimize_memory
    custom_tooltip_fail = {
        text = "This feature is not implemented yet."
        has_country_flag = oxr_mdlc_councilor_editor_new_stuff_enabled
    }
}

